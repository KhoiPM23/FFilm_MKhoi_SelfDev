<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${banner.get('title')}">Trang ch·ªß</title> 
    <link rel="stylesheet" th:href="@{/css/hover-card.css}">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/ai-agent.css}">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<div th:replace="fragments/header :: header"></div>

<section class="hero-banner" 
         id="heroBanner" 
         th:attr="data-movie-id=${banner.id}, 
                  data-title=${banner.title},
                  data-trailer-key=${banner.trailerKey},
                  data-logo-path=${banner.logoPath}"
         th:style="'background-image: url(' + ${banner.backdrop} + ')'">
    
    <div class="hero-video-container" id="heroVideoContainer">
        <div id="heroPlayer"></div>
    </div>
    <div class="hero-overlay"></div>
    
    <div class="hero-content">
        <div class="hero-title-container">
            <img class="hero-logo-image" id="heroLogo" src="" alt="Movie Logo" style="display:none;">
            <h1 class="hero-title" id="heroTitleText" th:text="${banner.title}">Movie Title</h1>
        </div>
        
        <div class="hero-meta">
            <div class="content-rating" id="contentRating">
                <span>T13+</span>
            </div>
            <div class="rating">
                <i class="fas fa-star"></i>
                <span th:text="${banner.rating}">8.5</span>
            </div>
            <div class="year" th:text="${banner.year}">2025</div>
            
            <div class="duration" id="heroDuration" 
                th:text="${banner.runtime == '‚Äî' ? '‚Äî' : banner.runtime + ' ph√∫t'}">
                ‚Äî ph√∫t
            </div>
            
            <div class="country" id="heroCountry" 
                th:text="${banner.country}">
                Qu·ªëc gia
            </div>
        </div>
        
        <button class="description-toggle" id="descToggle">
            <i class="fas fa-chevron-down"></i>
        </button>
        
        <p class="hero-description" id="heroDesc" th:text="${banner.overview}">
            Movie description here...
        </p>
        
        <div class="hero-actions">
            <a th:href="@{'/movie/detail/' + ${banner.id}}" class="btn-play">
                <i class="fas fa-play"></i>
                Xem ngay
            </a>

            <div class="action-buttons-group">
                <button class="btn-circle hero-action-icon hover-like-btn" 
                        id="heroLikeBtn" 
                        type="button"
                        th:data-movie-id="${banner.id}"
                        th:onclick="'event.stopPropagation(); toggleHoverLike(this)'" 
                        title="Th√™m v√†o danh s√°ch">
                    <i class="far fa-heart"></i> 
                </button>
                
                <button class="btn-circle hero-action-icon hover-share-btn" 
                        id="heroShareBtn" 
                        type="button"
                        th:data-movie-id="${banner.id}"
                        th:data-movie-title="${banner.title}"
                        th:onclick="'event.stopPropagation(); showShareModal(this)'"
                        title="Chia s·∫ª">
                    <i class="fas fa-share-alt"></i>
                </button>
                
                <div class="action-divider"></div>

                <button class="btn-circle volume-btn" id="volumeBtn" title="B·∫≠t/T·∫Øt ti·∫øng">
                    <i class="fas fa-volume-mute"></i>
                </button>
            </div>
        </div>
    </div>

    <div class="mini-carousel">
        <div class="mini-carousel-track" id="miniCarousel">
            <div th:each="movie, iterStat : ${hotMovies}" 
                class="mini-card"
                th:classappend="${iterStat.index == 0 ? 'active' : ''}" 
                th:attr="data-movie-id=${movie.id}, 
                        data-title=${movie.title}, 
                        data-overview=${movie.overview},
                        data-backdrop=${movie.backdrop},  
                        data-rating=${movie.rating},
                        data-year=${movie.year},
                        data-runtime=${movie.runtime},
                        data-country=${movie.country}"
                onclick="switchBanner(this)">
                
                <img th:src="@{${#strings.replace(movie.backdrop, '/original', '/w500')}}" 
                    th:alt="${movie.title}" 
                    onerror="this.src='/images/placeholder.jpg'"> 
                
                <div class="mini-card-overlay"></div>
            </div>
        </div>
    </div>
</section>


<section class="movies movie-list-section">
    <div class="section-header">
        <div class="section-title-wrapper">
             <h2 class="section-title">üî• Phim Hot</h2>
             <a href="/discover?quickFilter=trending" class="view-more-link">
                Xem th√™m <i class="fas fa-chevron-right"></i>
             </a>
        </div>
        <div class="carousel-nav">
            <button class="nav-btn prev-btn" id="hotPrevBtn"><i class="fas fa-chevron-left"></i></button>
            <button class="nav-btn next-btn" id="hotNextBtn"><i class="fas fa-chevron-right"></i></button>
        </div>
    </div>
    
    <div class="movie-carousel">
        <div class="movie-slider" id="hotSlider">
    
            <div th:each="movie, iterStat : ${hotMovies}" 
                class="movie-card" 
                th:classappend="'ranked rank-' + (((${iterStat.index}) % 5) + 1)"
                th:attr="data-movie-id=${movie.id}">
                
                <div class="movie-poster">
                    <img th:src="${movie.poster}" 
                        th:alt="${movie.title}"
                        onerror="this.src='/images/placeholder.jpg'">
                    
                    <div class="ranking-overlay"></div>
                    <div class="ranking-number" th:text="${iterStat.index + 1}"></div>
                </div>
                
                <div class="movie-info">
                    <h3 th:text="${movie.title}">Movie Title</h3>
                    <p class="movie-rating">
                        ‚≠ê <span th:text="${movie.rating}">8.5</span>
                    </p>
                </div>
                
                <div th:replace="~{fragments/hover-card :: hoverCard(${movie})}"></div>

            </div>
        </div>
    </div>
</section>

<section class="movies movie-list-section">
    <div class="section-header">
         <div class="section-title-wrapper">
            <h2 class="section-title">üÜï Phim M·ªõi Ra M·∫Øt</h2>
            <a href="/discover?quickFilter=new" class="view-more-link">
                Xem th√™m <i class="fas fa-chevron-right"></i>
            </a>
        </div>
        <div class="carousel-nav">
            <button class="nav-btn prev-btn" id="newPrevBtn"><i class="fas fa-chevron-left"></i></button>
            <button class="nav-btn next-btn" id="newNextBtn"><i class="fas fa-chevron-right"></i></button>
        </div>
    </div>
    <div class="movie-carousel">
        <div class="movie-slider" id="newSlider">
            <div th:each="movie : ${newMovies}" 
                 class="movie-card" 
                 th:attr="data-movie-id=${movie.id}">
                
                <div class="movie-poster">
                    <img th:src="${movie.poster}" th:alt="${movie.title}" onerror="this.src='/images/placeholder.jpg'">
                </div>
                <div class="movie-info">
                    <h3 th:text="${movie.title}">Movie Title</h3>
                    <p class="movie-rating">‚≠ê <span th:text="${movie.rating}">8.5</span></p>
                </div>
                
                <div th:replace="~{fragments/hover-card :: hoverCard(${movie})}"></div>
            </div>
        </div>
    </div>
</section>

<section class="movies movie-list-section">
    <div class="section-header">
         <div class="section-title-wrapper">
            <h2 class="section-title">üéå Anime Hot</h2>
            <a href="/discover?genres=16" class="view-more-link">
                Xem th√™m <i class="fas fa-chevron-right"></i>
            </a>
        </div>
        <div class="carousel-nav">
            <button class="nav-btn prev-btn" id="animePrevBtn"><i class="fas fa-chevron-left"></i></button>
            <button class="nav-btn next-btn" id="animeNextBtn"><i class="fas fa-chevron-right"></i></button>
        </div>
    </div>
    <div class="movie-carousel">
        <div class="movie-slider" id="animeSlider">
            <div th:each="movie : ${animeMovies}" 
                 class="movie-card" 
                 th:attr="data-movie-id=${movie.id}">
                
                <div class="movie-poster">
                    <img th:src="${movie.poster}" th:alt="${movie.title}" onerror="this.src='/images/placeholder.jpg'">
                </div>
                <div class="movie-info">
                    <h3 th:text="${movie.title}">Movie Title</h3>
                    <p class="movie-rating">‚≠ê <span th:text="${movie.rating}">8.5</span></p>
                </div>
                
                <div th:replace="~{fragments/hover-card :: hoverCard(${movie})}"></div>
            </div>
        </div>
    </div>
</section>

<section class="movies movie-list-section">
    <div class="section-header">
         <div class="section-title-wrapper">
            <h2 class="section-title">üë∂ Phim Cho Tr·∫ª Em</h2>
            <a href="/discover?genres=10751" class="view-more-link">
                Xem th√™m <i class="fas fa-chevron-right"></i>
            </a>
        </div>
        <div class="carousel-nav">
            <button class="nav-btn prev-btn" id="kidsPrevBtn"><i class="fas fa-chevron-left"></i></button>
            <button class="nav-btn next-btn" id="kidsNextBtn"><i class="fas fa-chevron-right"></i></button>
        </div>
    </div>
    <div class="movie-carousel">
        <div class="movie-slider" id="kidsSlider">
            <div th:each="movie : ${kidsMovies}" 
                 class="movie-card" 
                 th:attr="data-movie-id=${movie.id}">
                
                <div class="movie-poster">
                    <img th:src="${movie.poster}" th:alt="${movie.title}" onerror="this.src='/images/placeholder.jpg'">
                </div>
                <div class="movie-info">
                    <h3 th:text="${movie.title}">Movie Title</h3>
                    <p class="movie-rating">‚≠ê <span th:text="${movie.rating}">8.5</span></p>
                </div>
                
                <div th:replace="~{fragments/hover-card :: hoverCard(${movie})}"></div>
            </div>
        </div>
    </div>
</section>

<section class="movies movie-list-section">
    <div class="section-header">
         <div class="section-title-wrapper">
            <h2 class="section-title">üí• Phim H√†nh ƒê·ªông Hot</h2>
            <a href="/discover?genres=28" class="view-more-link">
                Xem th√™m <i class="fas fa-chevron-right"></i>
            </a>
        </div>
        <div class="carousel-nav">
            <button class="nav-btn prev-btn" id="actionPrevBtn"><i class="fas fa-chevron-left"></i></button>
            <button class="nav-btn next-btn" id="actionNextBtn"><i class="fas fa-chevron-right"></i></button>
        </div>
    </div>
    <div class="movie-carousel">
        <div class="movie-slider" id="actionSlider">
            <div th:each="movie : ${actionMovies}" 
                 class="movie-card" 
                 th:attr="data-movie-id=${movie.id}">
                
                <div class="movie-poster">
                    <img th:src="${movie.poster}" th:alt="${movie.title}" onerror="this.src='/images/placeholder.jpg'">
                </div>
                <div class="movie-info">
                    <h3 th:text="${movie.title}">Movie Title</h3>
                    <p class="movie-rating">‚≠ê <span th:text="${movie.rating}">8.5</span></p>
                </div>
                
                <div th:replace="~{fragments/hover-card :: hoverCard(${movie})}"></div>
            </div>
        </div>
    </div>
</section>

<footer>
    <div th:replace="fragments/footer :: footer"></div>
</footer>


<script src="https://www.youtube.com/iframe_api"></script>

<div th:replace="fragments/ai-chat :: ai-chat"></div>
<script th:src="@{/js/movie/ai-agent.js}" defer></script>
<script src="/js/movie/share-modal.js"></script>
<script src="/js/script.js"></script>

<div th:replace="fragments/share-modal :: shareModal"></div>

</body>
</html>